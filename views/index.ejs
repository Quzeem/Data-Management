<%- include ('./partials/header') %>

<div class="guard-list-container position-relative">

  <h2 class="mb-3">Cougar Security Guards</h2>
  <a class="btn btn-primary position-absolute" href="/guards/new" role="button" id="add-new-guard">Add New Guard</a>

  <div class="border p-4">
    <% guards.forEach(guard => { %>
    <div class="media">
      <img src="<%= guard.guard_photo %>" class="mr-3" alt="Guard Avatar">
      <div class="media-body">
        <p><b>Name: </b><%= guard.guard_name %> </p>
        <p><b>Phone: </b><%= guard.phone_number %></p>
        <a class="btn btn-primary btn-sm" href="/guards/<%= guard._id %>" role="button">View Details</a>
      </div>
    </div>
    <hr class="my-3">
    <% }) %>
  </div>

  <!-- <nav aria-label="Page navigation" class="d-inline-block position-absolute" id="pagination">
    <ul class="pagination mb-0">
      <li class="page-item"><a class="page-link" href="#">Prev</a></li>
      <li class="page-item"><a class="page-link" href="#">Next</a></li>
    </ul>
  </nav> -->
  <nav aria-label="Page navigation" class="d-inline-block position-absolute" id="pagination">
   <% if (pages > 0) { %>
   <ul class="pagination mb-0">
     <% if (Number(currentPage) == 1) { %>
     <li class="page-item disabled"><a class="page-link">First</a></li>
     <% } else { %>
     <li class="page-item"><a class="page-link" href="/guards">First</a></li>
     <% } %>
     <% let i = (Number(currentPage) > 5 ? Number(currentPage) - 4 : 1) %>
     <% if (i !== 1) { %>
     <li class="page-item disabled"><a class="page-link">...</a></li>
     <% } %>
     <% for (; i <= (Number(currentPage) + 4) && i <= pages; i++) { %>
     <% if (i == Number(currentPage)) { %>
     <li class="page-item active"><a class="page-link"><%= i %></a></li>
     <% } else { %>
     <li class="page-item"><a class="page-link" href="/guards?page=<%= i %>"><%= i %></a></li>
     <% } %>
     <% if (i == Number(currentPage) + 4 && i < pages) { %>
     <li class="page-item disabled"><a class="page-link">...</a></li>
     <% } %>
     <% } %>
     <% if (Number(currentPage) == pages) { %>
     <li class="page-item disabled"><a class="page-link">Last</a></li>
     <% } else { %>
     <li class="page-item"><a class="page-link" href="/guards?page=<%= pages %>">Last</a></li>
     <% } %>
   </ul>
   <% } %>
  </nav>

</div>

<%- include ('./partials/footer') %>